<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clothing Studio - 3D Shop</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- OrbitControls -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        #canvas {
            width: 100vw;
            height: 100vh;
            display: block;
        }
        #shop-ui {
            position: absolute;
            top: 0;
            right: 0;
            width: 300px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            max-height: 100vh;
            overflow-y: auto;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.2);
        }
        .clothing-item {
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .clothing-item:hover {
            background-color: #f1f1f1;
        }
        #preview-canvas {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border: 1px solid #ccc;
            display: none;
            z-index: 1000;
        }
    </style>
</head>
<body class="bg-gray-100">
    <canvas id="canvas"></canvas>
    <div id="shop-ui" class="text-gray-800">
        <h2 class="text-2xl font-bold mb-4">Shop Clothing</h2>
        <div id="clothing-list"></div>
    </div>
    <div id="preview-canvas">
        <canvas id="preview"></canvas>
        <button id="close-preview" class="mt-4 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">Close</button>
    </div>

    <script>
        // Main Three.js Scene
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('canvas'), antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);

        // Orbit Controls
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;

        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);
        const pointLight = new THREE.PointLight(0xffffff, 1, 100);
        pointLight.position.set(5, 5, 5);
        scene.add(pointLight);

        // Room (Walls, Floor, Ceiling)
        const roomMaterial = new THREE.MeshStandardMaterial({ color: 0xf5f5f5 });
        const floor = new THREE.Mesh(new THREE.PlaneGeometry(20, 20), new THREE.MeshStandardMaterial({ color: 0xcccccc }));
        floor.rotation.x = -Math.PI / 2;
        floor.position.y = -2;
        scene.add(floor);

        const walls = [
            new THREE.Mesh(new THREE.PlaneGeometry(20, 10), roomMaterial), // Back
            new THREE.Mesh(new THREE.PlaneGeometry(20, 10), roomMaterial), // Front
            new THREE.Mesh(new THREE.PlaneGeometry(20, 10), roomMaterial), // Left
            new THREE.Mesh(new THREE.PlaneGeometry(20, 10), roomMaterial)  // Right
        ];
        walls[0].position.set(0, 3, -10);
        walls[1].position.set(0, 3, 10);
        walls[1].rotation.y = Math.PI;
        walls[2].position.set(-10, 3, 0);
        walls[2].rotation.y = Math.PI / 2;
        walls[3].position.set(10, 3, 0);
        walls[3].rotation.y = -Math.PI / 2;
        walls.forEach(wall => scene.add(wall));

        // Hacker Desk
        const deskMaterial = new THREE.MeshStandardMaterial({ color: 0x333333 });
        const desk = new THREE.Mesh(new THREE.BoxGeometry(3, 0.2, 1.5), deskMaterial);
        desk.position.set(-5, -1.8, 0);
        scene.add(desk);

        const monitor = new THREE.Mesh(new THREE.BoxGeometry(1.5, 1, 0.2), new THREE.MeshStandardMaterial({ color: 0x222222 }));
        monitor.position.set(-5, -1, 0);
        scene.add(monitor);

        const keyboard = new THREE.Mesh(new THREE.BoxGeometry(1, 0.1, 0.4), new THREE.MeshStandardMaterial({ color: 0x111111 }));
        keyboard.position.set(-5, -1.6, 0.3);
        scene.add(keyboard);

        const mouse = new THREE.Mesh(new THREE.BoxGeometry(0.2, 0.1, 0.1), new THREE.MeshStandardMaterial({ color: 0x555555 }));
        mouse.position.set(-4.5, -1.6, 0.3);
        scene.add(mouse);

        // Hanger Rack
        const rackPole = new THREE.Mesh(new THREE.CylinderGeometry(0.1, 0.1, 5, 32), new THREE.MeshStandardMaterial({ color: 0x666666 }));
        rackPole.position.set(5, 0, 0);
        rackPole.rotation.z = Math.PI / 2;
        scene.add(rackPole);

        const rackSupports = [
            new THREE.Mesh(new THREE.BoxGeometry(0.2, 2, 0.2), new THREE.MeshStandardMaterial({ color: 0x666666 })),
            new THREE.Mesh(new THREE.BoxGeometry(0.2, 2, 0.2), new THREE.MeshStandardMaterial({ color: 0x666666 }))
        ];
        rackSupports[0].position.set(2.5, -1, 0);
        rackSupports[1].position.set(7.5, -1, 0);
        rackSupports.forEach(support => scene.add(support));

        // Clothing Items (12 basic pieces)
        const clothingItems = [
            { name: "White T-Shirt", color: 0xffffff, type: "shirt" },
            { name: "Black T-Shirt", color: 0x000000, type: "shirt" },
            { name: "Blue Jeans", color: 0x0000ff, type: "pants" },
            { name: "Black Jeans", color: 0x000000, type: "pants" },
            { name: "Red Hoodie", color: 0xff0000, type: "hoodie" },
            { name: "Green Jacket", color: 0x00ff00, type: "jacket" },
            { name: "Gray Sweater", color: 0x888888, type: "sweater" },
            { name: "Navy Blazer", color: 0x000080, type: "blazer" },
            { name: "White Shirt", color: 0xffffff, type: "shirt" },
            { name: "Khaki Pants", color: 0xc2b280, type: "pants" },
            { name: "Black Hoodie", color: 0x000000, type: "hoodie" },
            { name: "Denim Jacket", color: 0x1e90ff, type: "jacket" }
        ];

        const clothingMeshes = [];
        clothingItems.forEach((item, index) => {
            let geometry;
            if (item.type === "shirt" || item.type === "hoodie" || item.type === "sweater" || item.type === "blazer" || item.type === "jacket") {
                geometry = new THREE.BoxGeometry(0.5, 0.8, 0.1); // Flat for hanging shirts
            } else {
                geometry = new THREE.CylinderGeometry(0.2, 0.2, 0.8, 16); // Folded pants
            }
            const material = new THREE.MeshStandardMaterial({ color: item.color });
            const mesh = new THREE.Mesh(geometry, material);
            mesh.position.set(2.5 + (index * 0.4), 1.5, 0);
            mesh.userData = { name: item.name, type: item.type };
            scene.add(mesh);
            clothingMeshes.push(mesh);
        });

        // Camera Position
        camera.position.set(0, 2, 10);
        controls.update();

        // Animation Loop
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }
        animate();

        // Window Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Shop UI
        const clothingList = document.getElementById('clothing-list');
        clothingItems.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'clothing-item p-4 mb-2 border rounded';
            div.innerHTML = `
                <h3 class="text-lg font-semibold">${item.name}</h3>
                <p>Type: ${item.type.charAt(0).toUpperCase() + item.type.slice(1)}</p>
                <p>Price: $${(Math.random() * 50 + 20).toFixed(2)}</p>
            `;
            div.addEventListener('click', () => showPreview(clothingMeshes[index]));
            clothingList.appendChild(div);
        });

        // Preview Canvas
        const previewCanvas = document.getElementById('preview');
        const previewRenderer = new THREE.WebGLRenderer({ canvas: previewCanvas, antialias: true });
        previewRenderer.setSize(300, 300);
        const previewScene = new THREE.Scene();
        const previewCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
        previewCamera.position.z = 2;
        const previewControls = new THREE.OrbitControls(previewCamera, previewRenderer.domElement);
        previewControls.enableDamping = true;
        const previewLight = new THREE.AmbientLight(0xffffff, 0.8);
        previewScene.add(previewLight);
        const previewPointLight = new THREE.PointLight(0xffffff, 1, 100);
        previewPointLight.position.set(5, 5, 5);
        previewScene.add(previewPointLight);

        function showPreview(mesh) {
            previewScene.children = previewScene.children.filter(child => child.isLight);
            const previewMesh = mesh.clone();
            previewScene.add(previewMesh);
            document.getElementById('preview-canvas').style.display = 'block';

            function previewAnimate() {
                requestAnimationFrame(previewAnimate);
                previewControls.update();
                previewRenderer.render(previewScene, previewCamera);
            }
            previewAnimate();
        }

        document.getElementById('close-preview').addEventListener('click', () => {
            document.getElementById('preview-canvas').style.display = 'none';
        });
    </script>
</body>
</html>
