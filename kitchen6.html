<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KitchenVibe Ghost Kitchen</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #fff;
        }
        canvas {
            display: block;
            width: 100vw !important;
            height: 100vh !important;
        }
        #ui-menu {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            color: #fff;
            font-family: Arial, sans-serif;
            z-index: 10;
        }
        #ui-menu button {
            display: block;
            margin: 5px 0;
            padding: 8px;
            background: #333;
            color: #fff;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        #ui-menu button:hover {
            background: #555;
        }
        #shipping-form, #about-info {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            font-family: Arial, sans-serif;
            max-width: 400px;
            z-index: 10;
        }
        #shipping-form input {
            display: block;
            margin: 10px 0;
            padding: 5px;
            width: 200px;
        }
        #shipping-form button, #about-info button {
            padding: 8px;
            background: #333;
            color: #fff;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        #shipping-form button:hover, #about-info button:hover {
            background: #555;
        }
        @media (max-width: 768px) {
            canvas {
                width: 100vw !important;
                height: 100vh !important;
            }
            #ui-menu {
                top: 5px;
                left: 5px;
                font-size: 12px;
            }
            #ui-menu button {
                padding: 6px;
            }
            #shipping-form, #about-info {
                width: 90%;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div id="ui-menu">
        <button onclick="switchView('home')">Home</button>
        <button onclick="switchView('about')">About</button>
        <button onclick="switchView('shop')">Shop</button>
        <button onclick="switchView('checkout')">Checkout</button>
    </div>
    <div id="shipping-form">
        <h2>Shipping Information</h2>
        <input type="text" placeholder="Name" />
        <input type="text" placeholder="Address" />
        <input type="text" placeholder="City" />
        <input type="text" placeholder="Zip Code" />
        <button onclick="alert('Order Submitted!')">Submit Order</button>
    </div>
    <div id="about-info">
        <h2>About KitchenVibe Ghost Kitchen</h2>
        <p>We are a premier ghost kitchen specializing in delicious, made-to-order meals delivered straight to your door. Our state-of-the-art kitchen ensures efficiency and quality, using the freshest ingredients to create culinary delights. Contact us at info@kitchenvibe.com.</p>
        <button onclick="document.getElementById('about-info').style.display = 'none'">Close</button>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        // Template Data
        const templateData = {
            name: "KitchenVibe Ghost Kitchen Template",
            description: "A high-fidelity 3D ghost kitchen template optimized for online food businesses, featuring a streamlined layout with a large make table, a long stainless steel stove with basic burners and knobs along the back wall, vent hoods with shiny silver metallic textures, a single-door fridge, a side counter with a prep container and sink, and a computer desk for order processing. Enhanced with targeted lighting above the stove, reduced brightness for a moodier aesthetic, and four interactive camera views optimized for mobile and desktop.",
            features: [
                "Large wooden make table positioned near stove for efficient prep",
                "Long stainless steel stove (4x0.9x1m) with super shiny silver metallic texture, basic burners, knobs, and vent hoods",
                "Simplified single-door fridge with reflective stainless steel, positioned for easy access",
                "Side counter with stainless steel prep container and integrated sink for assembly and cleaning",
                "Desk with computer (monitor with screen texture, keyboard) for online orders",
                "High-resolution 2K textures with normal and roughness maps",
                "Targeted lighting with point lights above stove and reduced ambient brightness",
                "Interactive UI with four camera angles optimized for mobile and desktop"
            ],
            about: {
                title: "About KitchenVibe Ghost Kitchen",
                content: "We are a premier ghost kitchen specializing in delicious, made-to-order meals delivered straight to your door. Our state-of-the-art kitchen ensures efficiency and quality, using the freshest ingredients to create culinary delights. Contact us at info@kitchenvibe.com."
            }
        };

        // Scene setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        document.body.appendChild(renderer.domElement);

        // OrbitControls
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.screenSpacePanning = false;
        controls.minDistance = 2;
        controls.maxDistance = 15;
        controls.maxPolarAngle = Math.PI / 2;
        controls.target.set(0, 1, 0);

        // Environment Map for Reflections
        const cubeTextureLoader = new THREE.CubeTextureLoader();
        const envMap = cubeTextureLoader.load([
            'https://threejs.org/examples/textures/cube/Bridge2/posx.jpg',
            'https://threejs.org/examples/textures/cube/Bridge2/negx.jpg',
            'https://threejs.org/examples/textures/cube/Bridge2/posy.jpg',
            'https://threejs.org/examples/textures/cube/Bridge2/negy.jpg',
            'https://threejs.org/examples/textures/cube/Bridge2/posz.jpg',
            'https://threejs.org/examples/textures/cube/Bridge2/negz.jpg'
        ]);
        scene.environment = envMap;

        // Adjusted Lighting (Less Bright, Targeted)
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6); // Reduced for moodier scene
        scene.add(ambientLight);
        const directionalLight1 = new THREE.DirectionalLight(0xffffff, 0.8); // Softer light
        directionalLight1.position.set(5, 5, 5);
        directionalLight1.castShadow = true;
        directionalLight1.shadow.mapSize.width = 512;
        directionalLight1.shadow.mapSize.height = 512;
        scene.add(directionalLight1);
        const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.6);
        directionalLight2.position.set(-5, 5, -5);
        directionalLight2.castShadow = true;
        directionalLight2.shadow.mapSize.width = 512;
        directionalLight2.shadow.mapSize.height = 512;
        scene.add(directionalLight2);
        // Point Lights Above Stove
        const stoveLight1 = new THREE.PointLight(0xffffff, 2.0, 5); // Focused on stove
        stoveLight1.position.set(-1, 2.7, -4);
        stoveLight1.castShadow = true;
        stoveLight1.shadow.mapSize.width = 512;
        stoveLight1.shadow.mapSize.height = 512;
        scene.add(stoveLight1);
        const stoveLight2 = new THREE.PointLight(0xffffff, 2.0, 5);
        stoveLight2.position.set(1, 2.7, -4);
        stoveLight2.castShadow = true;
        stoveLight2.shadow.mapSize.width = 512;
        stoveLight2.shadow.mapSize.height = 512;
        scene.add(stoveLight2);

        // Texture Loader
        const textureLoader = new THREE.TextureLoader();

        // Floor (ceramic tiles)
        const floorMaterial = new THREE.MeshStandardMaterial({
            color: 0xaaaaaa,
            roughness: 0.2,
            metalness: 0.05,
            envMap: envMap,
            envMapIntensity: 0.2
            // Suggested texture: https://polyhaven.com/a/white_ceramic_tiles_2k
        });
        const floorGeometry = new THREE.PlaneGeometry(10, 10);
        const floor = new THREE.Mesh(floorGeometry, floorMaterial);
        floor.rotation.x = -Math.PI / 2;
        floor.receiveShadow = true;
        scene.add(floor);

        // Walls (subway tiles)
        const wallMaterial = new THREE.MeshStandardMaterial({
            color: 0xffffff,
            roughness: 0.15,
            metalness: 0.05,
            envMap: envMap,
            envMapIntensity: 0.2
            // Suggested texture: https://polyhaven.com/a/subway_tiles_2k
        });
        const wall1 = new THREE.Mesh(new THREE.PlaneGeometry(10, 5), wallMaterial);
        wall1.position.set(0, 2.5, -5);
        wall1.receiveShadow = true;
        scene.add(wall1);
        const wall2 = new THREE.Mesh(new THREE.PlaneGeometry(10, 5), wallMaterial);
        wall2.position.set(-5, 2.5, 0);
        wall2.rotation.y = Math.PI / 2;
        wall2.receiveShadow = true;
        scene.add(wall2);
        const wall3 = new THREE.Mesh(new THREE.PlaneGeometry(10, 5), wallMaterial);
        wall3.position.set(0, 2.5, 5);
        wall3.receiveShadow = true;
        scene.add(wall3);

        // Kitchen Logo
        const logoCanvas = document.createElement('canvas');
        logoCanvas.width = 1024;
        logoCanvas.height = 256;
        const logoContext = logoCanvas.getContext('2d');
        logoContext.fillStyle = '#ffffff';
        logoContext.fillRect(0, 0, logoCanvas.width, logoCanvas.height);
        logoContext.font = '150px Arial';
        logoContext.fillStyle = '#333333';
        logoContext.textAlign = 'center';
        logoContext.textBaseline = 'middle';
        logoContext.fillText('KitchenVibe', logoCanvas.width / 2, logoCanvas.height / 2 - 50);
        logoContext.font = '80px Arial';
        logoContext.fillText('Ghost Kitchen', logoCanvas.width / 2, logoCanvas.height / 2 + 50);
        const logoTexture = new THREE.CanvasTexture(logoCanvas);
        const logoGeometry = new THREE.PlaneGeometry(3, 0.75);
        const logoMaterial = new THREE.MeshBasicMaterial({
            map: logoTexture,
            transparent: true
        });
        const logo = new THREE.Mesh(logoGeometry, logoMaterial);
        logo.position.set(0, 3, -4.9);
        scene.add(logo);

        // Make Table (Moved Near Stove)
        const tableGeometry = new THREE.BoxGeometry(4, 0.1, 2, 8, 8, 8);
        const tableMaterial = new THREE.MeshStandardMaterial({
            color: 0x8b5e3c,
            roughness: 0.3,
            metalness: 0.05,
            envMap: envMap,
            envMapIntensity: 0.3
            // Suggested texture: https://polyhaven.com/a/oak_wood_2k
        });
        const table = new THREE.Mesh(tableGeometry, tableMaterial);
        table.position.set(0, 0.9, -1); // Closer to stove
        table.castShadow = true;
        table.receiveShadow = true;
        scene.add(table);
        const legGeometry = new THREE.CylinderGeometry(0.05, 0.05, 0.8, 12);
        const legs = [
            { pos: [1.8, 0.4, -0.1] },
            { pos: [1.8, 0.4, -1.9] },
            { pos: [-1.8, 0.4, -0.1] },
            { pos: [-1.8, 0.4, -1.9] }
        ];
        legs.forEach(l => {
            const leg = new THREE.Mesh(legGeometry, tableMaterial);
            leg.position.set(...l.pos);
            leg.castShadow = true;
            scene.add(leg);
        });

        // Stainless Steel Material
        const stainlessSteelMaterial = new THREE.MeshStandardMaterial({
            color: 0xd0d0d0,
            roughness: 0.05,
            metalness: 1.0,
            envMap: envMap,
            envMapIntensity: 0.8 // Reduced for moodier lighting
            // Suggested texture: https://polyhaven.com/a/metal_brushed_2k
        });

        // Fridge (Relocated to Left Wall)
        const fridgeGeometry = new THREE.BoxGeometry(1, 2, 0.8, 8, 8, 8);
        const fridge = new THREE.Mesh(fridgeGeometry, stainlessSteelMaterial);
        fridge.position.set(-4, 1, 0); // Left wall
        fridge.castShadow = true;
        scene.add(fridge);
        const fridgeDoorGeometry = new THREE.BoxGeometry(0.95, 1.9, 0.05, 8, 8, 8);
        const fridgeDoor = new THREE.Mesh(fridgeDoorGeometry, stainlessSteelMaterial);
        fridgeDoor.position.set(-4, 1, 0.425);
        scene.add(fridgeDoor);
        const handleGeometry = new THREE.CylinderGeometry(0.02, 0.02, 1.2, 12);
        const fridgeHandle = new THREE.Mesh(handleGeometry, stainlessSteelMaterial);
        fridgeHandle.position.set(-3.8, 1, 0.45);
        scene.add(fridgeHandle);

        // Stove (Unchanged Position)
        const stoveGeometry = new THREE.BoxGeometry(4, 0.9, 1, 8, 8, 8);
        const stove = new THREE.Mesh(stoveGeometry, stainlessSteelMaterial);
        stove.position.set(0, 0.45, -4);
        stove.castShadow = true;
        scene.add(stove);
        const stoveDoorGeometry = new THREE.BoxGeometry(3.9, 0.5, 0.05, 8, 8, 8);
        const stoveDoor = new THREE.Mesh(stoveDoorGeometry, stainlessSteelMaterial);
        stoveDoor.position.set(0, 0.25, -3.475);
        scene.add(stoveDoor);
        const stoveHandle = new THREE.Mesh(new THREE.CylinderGeometry(0.02, 0.02, 3, 12), stainlessSteelMaterial);
        stoveHandle.position.set(0, 0.25, -3.45);
        stoveHandle.rotation.z = Math.PI / 2;
        scene.add(stoveHandle);
        const stoveTopGeometry = new THREE.BoxGeometry(4, 0.05, 1, 8, 8, 8);
        const stoveTopMaterial = new THREE.MeshStandardMaterial({
            color: 0x1a1a1a,
            roughness: 0.2,
            metalness: 0.9,
            envMap: envMap,
            envMapIntensity: 0.5
        });
        const stoveTop = new THREE.Mesh(stoveTopGeometry, stoveTopMaterial);
        stoveTop.position.set(0, 0.925, -4);
        scene.add(stoveTop);
        const burnerGeometry = new THREE.CylinderGeometry(0.15, 0.15, 0.02, 16);
        const burnerMaterial = new THREE.MeshStandardMaterial({
            color: 0x222222,
            roughness: 0.3,
            metalness: 0.8,
            envMap: envMap,
            envMapIntensity: 0.5
        });
        const burners = [
            { pos: [-1.2, 0.95, -4.6] },
            { pos: [-0.4, 0.95, -4.6] },
            { pos: [0.4, 0.95, -4.6] },
            { pos: [1.2, 0.95, -4.6] }
        ];
        burners.forEach(b => {
            const burner = new THREE.Mesh(burnerGeometry, burnerMaterial);
            burner.position.set(...b.pos);
            burner.rotation.x = Math.PI / 2;
            burner.castShadow = true;
            scene.add(burner);
        });
        const knobGeometry = new THREE.CylinderGeometry(0.03, 0.03, 0.02, 12);
        const knobs = [
            { pos: [-1.2, 0.925, -3.45] },
            { pos: [-0.4, 0.925, -3.45] },
            { pos: [0.4, 0.925, -3.45] },
            { pos: [1.2, 0.925, -3.45] }
        ];
        knobs.forEach(k => {
            const knob = new THREE.Mesh(knobGeometry, stainlessSteelMaterial);
            k.position.set(...k.pos);
            k.rotation.x = Math.PI / 2;
            k.castShadow = true;
            scene.add(k);
        });

        // Air Vent Hoods
        const hoodGeometry = new THREE.BoxGeometry(2, 0.3, 0.8, 8, 8, 8);
        const hoods = [
            { pos: [-1, 2.5, -4] },
            { pos: [1, 2.5, -4] }
        ];
        hoods.forEach(h => {
            const hood = new THREE.Mesh(hoodGeometry, stainlessSteelMaterial);
            hood.position.set(...h.pos);
            hood.castShadow = true;
            scene.add(hood);
            const chimneyGeometry = new THREE.BoxGeometry(0.5, 0.5, 0.5);
            const chimney = new THREE.Mesh(chimneyGeometry, stainlessSteelMaterial);
            chimney.position.set(h.pos[0], 3, h.pos[2]);
            scene.add(chimney);
        });

        // Side Counter (Moved to Front, with Sink)
        const sideCounterGeometry = new THREE.BoxGeometry(4, 0.1, 1, 8, 8, 8);
        const counterMaterial = new THREE.MeshStandardMaterial({
            color: 0xe0e0e0,
            roughness: 0.15,
            metalness: 0.05,
            envMap: envMap,
            envMapIntensity: 0.3
            // Suggested texture: https://polyhaven.com/a/quartzite_2k
        });
        const sideCounter = new THREE.Mesh(sideCounterGeometry, counterMaterial);
        sideCounter.position.set(0, 0.9, 3);
        sideCounter.receiveShadow = true;
        scene.add(sideCounter);
        const sideCabinet = new THREE.Mesh(new THREE.BoxGeometry(4, 0.9, 1, 8, 8, 8), cabinetMaterial);
        sideCabinet.position.set(0, 0.45, 3);
        sideCabinet.castShadow = true;
        sideCabinet.castShadow = true;
        scene.add(sideCabinet);
        const sinkGeometry = new THREE.BoxGeometry(0.8, 0.05, 0.5, 8, 8, 8);
        const sink = new THREE.Mesh(sinkGeometry, stainlessSteelMaterial);
        sink.position.set(1.5, 0.925, 3);
        scene.add(sink);
        const prepContainerGeometry = new THREE.BoxGeometry(0.4, 0.1, 0.3, 8, 8, 8);
        const prepContainer = new THREE.Mesh(prepContainerGeometry, stainlessSteelMaterial);
        prepContainer.position.set(-1, 1.0, 3);
        prepContainer.castShadow = true;
        scene.add(prepContainer);

        // Desk (Moved to Right Wall)
        const deskGeometry = new THREE.BoxGeometry(1.5, 0.1, 0.8, 8, 8, 8);
        const deskMaterial = new THREE.MeshStandardMaterial({
            color: 0x4a3728,
            roughness: 0.3,
            metalness: 0.05,
            envMap: envMap,
            envMapIntensity: 0.3
        });
        const desk = new THREE.Mesh(deskGeometry, deskMaterial);
        desk.position.set(4, 0.8, 0); // Right wall
        desk.castShadow = true;
        scene.add(desk);
        const deskLegGeometry = new THREE.CylinderGeometry(0.05, 0.05, 0.7, 12);
        const deskLegs = [
            { pos: [4.6, 0.35, 0.3] },
            { pos: [4.6, 0.35, -0.3] },
            { pos: [3.4, 0.35, 0.3] },
            { pos: [3.4, 0.35, -0.3] }
        ];
        deskLegs.forEach(l => {
            const leg = new THREE.Mesh(deskLegGeometry, deskMaterial);
            leg.position.set(...l.pos);
            leg.castShadow = true;
            scene.add(leg);
        });
        const monitorGeometry = new THREE.BoxGeometry(0.5, 0.3, 0.05, 8, 8, 8);
        const monitorMaterial = new THREE.MeshStandardMaterial({
            color: 0x333333,
            roughness: 0.3,
            metalness: 0.7,
            envMap: envMap,
            envMapIntensity: 0.5
        });
        const monitor = new THREE.Mesh(monitorGeometry, monitorMaterial);
        monitor.position.set(4, 1.05, 0);
        monitor.rotation.y = -Math.PI / 4;
        scene.add(monitor);
        const screenGeometry = new THREE.PlaneGeometry(0.4, 0.25);
        const screenMaterial = new THREE.MeshBasicMaterial({
            color: 0x000000,
            opacity: 0.8,
            transparent: true
        });
        const screen = new THREE.Mesh(screenGeometry, screenMaterial);
        screen.position.set(4, 1.05, 0.026);
        screen.rotation.y = -Math.PI / 4;
        scene.add(screen);
        const keyboardGeometry = new THREE.BoxGeometry(0.4, 0.05, 0.15, 8, 8, 8);
        const keyboard = new THREE.Mesh(keyboardGeometry, monitorMaterial);
        keyboard.position.set(4, 0.85, 0.2);
        keyboard.rotation.y = -Math.PI / 4;
        scene.add(keyboard);

        // Camera Presets (Adjusted for New Layout)
        const cameraPositions = {
            home: { pos: [5, 2.5, -3], target: [0, 1, -1], overlay: null }, // Wide view: stove, table, fridge
            about: { pos: [2, 2.5, -3], target: [0, 2.5, -4.9], overlay: 'about-info' }, // Logo focus
            shop: { pos: [-2, 1.5, -3], target: [0, 0.9, -4], overlay: null }, // Stove, hoods, table
            checkout: { pos: [5, 1.5, -1], target: [4, 0.8, 0], overlay: 'shipping-form' } // Desk focus
        };

        // View Switch Function
        function switchView(view) {
            const { pos, target, overlay } = cameraPositions[view];
            camera.position.set(...pos);
            controls.target.set(...target);
            controls.update();
            document.getElementById('shipping-form').style.display = overlay === 'shipping-form' ? 'block' : 'none';
            document.getElementById('about-info').style.display = overlay === 'about-info' ? 'block' : 'none';
        }

        // Initial View
        switchView('home');

        // Animation loop
        let time = 0;
        function animate() {
            requestAnimationFrame(animate);
            time += 0.01;
            controls.update();
            renderer.render(scene, camera);
        }
        animate();

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
